<html>
<head>
<script src='http://code.jquery.com/jquery-2.2.0.min.js'></script>
<script src='https://cdn.socket.io/socket.io-1.4.5.js'></script>
<link rel="stylesheet" type="text/css" href="chat.css">

</head>

<body>
<input type="text" id="user_name"/>
<button id="update_user_name">Update name</button>
</body>

<div id="chat-box">
            <div class="header">
                Test Room
            </div>
            <div id="messages" class="messages">
            <ul></ul>
          </div>
</div>

<script>
var socket = io('http://local.deadpool:3000');
var user = '';
var side = 'left'

socket.on('connect', function (data) {
  console.log('connected successfull');
});

socket.on('message', function(message) {
  console.log(message.username + ': ' + message.data);
  printMessage(message);
  side = (side == 'left') ? 'right' : 'left';
});

window.addEventListener("load", function() {
  $('#update_user_name').on('click', function(ev) {
    ev.preventDefault();
    user = $('#user_name').val();
    console.log('user', user);
  });
});

function printMessage(message) {
  $("#messages ul").append(`<li><span class=${side}><p>${message.username}</p><p>${message.data}</p></span></li>`);
}

</script>
</html>
